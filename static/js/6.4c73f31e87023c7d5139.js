webpackJsonp([6],{"8ozA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{stepIndex:-1,base64HistoryList:[]}},mounted:function(){this.addListener()},methods:{addListener:function(){var t=this,e=document.querySelector(".my-canvas");e.width=900,e.height=400;var n=e.getContext("2d"),a=!1,s=!1;e.addEventListener("mousedown",function(t){a=!0,n.beginPath(),n.moveTo(t.pageX-e.offsetLeft,t.pageY-e.offsetTop)}),e.addEventListener("mousemove",function(t){a&&(n.lineTo(t.pageX-e.offsetLeft,t.pageY-e.offsetTop),n.stroke(),s=!0)}),e.addEventListener("mouseup",function(){s&&(t.stepIndex++,t.base64HistoryList.push(e.toDataURL())),a=!1,s=!1})},downloadSignature:function(){var t=document.createElement("a"),e=document.querySelector(".my-canvas");t.download="签名",t.href=e.toDataURL("image/png"),t.click()},reStart:function(){var t=document.querySelector(".my-canvas");t.getContext("2d").clearRect(0,0,t.width,t.height),this.stepIndex=-1,this.base64HistoryList=[]},reCall:function(){if(this.stepIndex>=0){this.base64HistoryList.pop(),this.stepIndex--;var t=document.querySelector(".my-canvas"),e=t.getContext("2d");if(e.clearRect(0,0,t.width,t.height),-1!==this.stepIndex){var n=new Image;n.src=this.base64HistoryList[this.stepIndex],n.addEventListener("load",function(){e.drawImage(n,0,0)})}}else this.$message.info("不能再撤回了!")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signature"},[n("canvas",{staticClass:"my-canvas"}),t._v(" "),n("div",{staticClass:"btn-group"},[n("el-button",{attrs:{type:"primary"},on:{click:t.reStart}},[t._v("重新开始")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.reCall}},[t._v("撤回")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.downloadSignature}},[t._v("下载签名")])],1)])},staticRenderFns:[]};var i=n("VU/8")(a,s,!1,function(t){n("rUSU")},"data-v-a87ee8c8",null);e.default=i.exports},rUSU:function(t,e){}});