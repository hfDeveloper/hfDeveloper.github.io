webpackJsonp([5],{RZjc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{searchForm:{address:"",city:""},mapLevel:15,mapCategory:BMAP_NORMAL_MAP,myPoint:{lng:116.404,lat:39.915},myLocationText:"",loading:!1,rules:{city:[{required:!0,message:"城市不能为空",trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}]}}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=document.querySelector(".global-map"),t=new BMapGL.Map(e);this.publicConfig(t)},publicConfig:async function(e){var t=new BMapGL.Point(this.myPoint.lng,this.myPoint.lat),a=new BMapGL.Marker(this.myPoint);e.addOverlay(a),e.centerAndZoom(t,this.mapLevel),e.enableScrollWheelZoom(!0),e.setMapType(this.mapCategory),e.setTilt(60);var o=new BMapGL.ScaleControl;e.addControl(o);var r=new BMapGL.ZoomControl;e.addControl(r);var n=new BMapGL.CityListControl;e.addControl(n)},handleSearch:function(){var e=this;this.$refs.searchForm.validate(function(t){if(t){var a=document.querySelector(".global-map"),o=new BMapGL.Map(a),r=new BMapGL.Geocoder,n=e;r.getPoint(e.searchForm.address,function(e){e?(n.myPoint=e,n.mapLevel=17,n.publicConfig(o)):n.$message.warning("您选择的地址没有解析到结果！")},e.searchForm.city)}else e.$message.warning("请输入城市和地址后搜索")})},changeEarthMap:function(){this.mapLevel=0,this.mapCategory=BMAP_EARTH_MAP,this.initMap()},changeNormalMap:function(){this.mapLevel=15,this.mapCategory=BMAP_NORMAL_MAP,this.initMap()},myLocation:function(){this.loading=!0;var e=document.querySelector(".global-map"),t=new BMapGL.Map(e),a=new BMapGL.Geolocation,o=new BMapGL.Geocoder;a.enableSDKLocation();var r=this;a.getCurrentPosition(function(e){this.getStatus()==BMAP_STATUS_SUCCESS?(r.myPoint=e.point,r.mapLevel=17,r.mapCategory=BMAP_NORMAL_MAP,r.publicConfig(t),o.getLocation(e.point,function(e){var t=e.addressComponents;r.myLocationText="当前位置："+t.province+t.city+t.district+t.street+t.streetNumber}),r.loading=!1):(r.$message.warning("请重试!"),r.loading=!1)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"baidu-map"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"search"},[a("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.searchForm,rules:e.rules,size:"small"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"地址所在城市:",prop:"city","label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入地址所在城市"},model:{value:e.searchForm.city,callback:function(t){e.$set(e.searchForm,"city",t)},expression:"searchForm.city"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"地址:",prop:"address","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"请输入查询地址"},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1)],1)],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1)]),e._v(" "),a("el-col",{attrs:{span:8,offset:1}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeNormalMap}},[e._v("普通地图")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeEarthMap}},[e._v("3D地球地图")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.myLocation}},[e._v("查看当前位置")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8,offset:13}},[a("span",[e._v(e._s(e.myLocationText))])])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"global-map",attrs:{"element-loading-text":"正在加载当前位置信息，请稍后..."}})],1)},staticRenderFns:[]};var n=a("VU/8")(o,r,!1,function(e){a("YkBm")},"data-v-43e7ff22",null);t.default=n.exports},YkBm:function(e,t){}});